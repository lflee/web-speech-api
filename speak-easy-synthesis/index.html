<!DOCTYPE html>
<html>
  <head>
    <link rel="manifest" href="manifest.json">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width initial-scale=1">

    <title>Speech synthesiser</title>
    <link rel="shortcut icon" href="images/favicon.ico" type="image/png">

    <link rel="stylesheet" href="style.css">
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>

  <body>
    <h1>Speech synthesiser as a web share target</h1>

    <p>Enter some text in the input below and press return  or the "play" button to hear it. change voices using the dropdown menu.</p>
    
    <form>
    <input type="text" class="txt" id="textInput">
    <div id="textDiv"></div>
    <div>
      <label for="rate">Rate</label><input type="range" min="0.5" max="2" value="1" step="0.1" id="rate">
      <div class="rate-value">1</div>
      <div class="clearfix"></div>
    </div>
    <div>
      <label for="pitch">Pitch</label><input type="range" min="0" max="2" value="1" step="0.1" id="pitch">
      <div class="pitch-value">1</div>
      <div class="clearfix"></div>
    </div>
    <select>

    </select>
    <div class="controls">
      <button id="play" type="submit">Play</button>
    </div>
    </form>

    <script src="script.js"></script>

    <script>
        'use strict';
    
        if ('serviceWorker' in navigator) {
          navigator.serviceWorker.register('sw.js').then(registration => {
            console.log('ServiceWorker registration successful with scope:',
                        registration.scope);
          }).catch(err => {
            console.error('ServiceWorker registration failed:', err);
          });
        }
    
        function logText(message, isError) {
          if (isError)
            console.error(message);
          else
            console.log(message);
          var p = document.createElement('p');
          if (isError)
            p.setAttribute('class', 'error');
          document.querySelector('#output').appendChild(p);
          p.appendChild(document.createTextNode(message));
        }
    
        function onLoad() {
          var parsedUrl = new URL(window.location.toString());
          // logText("Title shared: " + parsedUrl.searchParams.get("title"));
          // logText("Text shared: " + parsedUrl.searchParams.get("text"));
          // logText("URL shared: " + parsedUrl.searchParams.get("url"));

          document.getElementById("textInput").innerHTML = parsedUrl.searchParams.get("text");
          document.getElementById("textDiv").innerHTML = parsedUrl.searchParams.get("text");

          console.log(parsedUrl.searchParams.get("text"));


        }
    
        window.addEventListener('load', onLoad);
      </script>

  </body>
</html>